- name: Install PIP Modules
  ansible.builtin.pip:
    name: "{{item}}"
    executable: pip3
  loop:
    - botocore
    - boto3

- name: Copy {{component}} SystemD file
  ansible.builtin.template:
    src: systemd.service
    dest: /etc/systemd/system/{{component}}.service

- name: Restart {{component}} Service
  ansible.builtin.systemd:
    name: "{{component}}"
    state: restarted
    enabled: yes
    daemon-reload: yes

- name: Include Filebeat Installation
  ansible.builtin.include_role:
    name: elk
    tasks_from: filebeat
